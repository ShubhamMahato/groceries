<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Groceries Shop</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="../css/Order_Now.css" />
    <link
      rel="stylesheet"
      href="https://unpkg.com/bootstrap@4.3.1/dist/css/bootstrap.min.css"
    />
    <script
      src="https://code.jquery.com/jquery-3.4.1.slim.min.js"
      integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
      integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
      integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6"
      crossorigin="anonymous"
    ></script>
    
    <link rel="stylesheet" href="../imports/jquery/jquery-ui.css">
    <script src="../imports/jquery/jquery.js"></script>
    <script src="../imports/jquery/jquery-ui.js"></script>


   <script type="text/javascript">
  $(function() {

$("#auto_search").autocomplete({
  source: //"autocomplete.php",
  [
  {
     id:1,
     value:"Ghee",
     img:"https://images-na.ssl-images-amazon.com/images/I/91kSCdljC%2BL._SX569_.jpg",
     price:"600"},
    {
    id:2,
     value:"Atta",
     img:"https://5.imimg.com/data5/MO/VY/MY-26606518/ashirwad-wheat-flour-500x500.jpg",
     price:"50"},
     {
      id:3,
     value:"Daal",
     img:"https://images-na.ssl-images-amazon.com/images/I/91%2B85gJpshL._SL1500_.jpg",
     price:"150"},
    {
      id:4,
     value:"Maggie",
     img:"https://images-na.ssl-images-amazon.com/images/I/81WyWDbuqsL._SX569_.jpg",
     price:"80"}
  
  ],
  minLength: 1,
  select: function(event, ui) {
    /*
    var url = ui.item.id;
    if(url != '') {
      location.href = '...' + url;
    }
    */
  },
  html: true, 
  open: function(event, ui) {
    $(".ui-autocomplete").css("z-index", 1000);

  }
})
  .autocomplete( "instance" )._renderItem = function( ul, item ) {
   return $( "<li class='list-group-item d-flex justify-content-between align-items-center'><div id='searchitem'><img id='searchimg' src='"+item.img+"'><span style='padding:20px'>"+item.value+"</span><span style='padding:20px'>"+item.price+"</span></div></li>" ).appendTo( ul );
  //return $("<ul class='list-group'><li class='list-group-item d-flex justify-content-between align-items-center'> "+item.value+"'<span class='badge badge-primary badge-pill'>"+item.value+"</span></li></ul>").appendTo( ul );
};

});
  </script>

  



 <!-- <script type="text/javascript">
            $(function() {
     

        $("#auto_search").autocomplete({
        source: "https://raw.githubusercontent.com/ShubhamMahato/DemoProject/master/items.json",
        minLength: 1,
        select: function(event, ui) {
            /*
            var url = ui.item.id;
            if(url != '') {
            location.href = '...' + url;
            }
            */
        },
        html: true, 
        open: function(event, ui) {
            $(".ui-autocomplete").css("z-index", 1000);

        }
        })
        .autocomplete( "instance" )._renderItem = function( ul, item ) {
        return $( "<li><div><img style='width:100px;height:100px' src='"+item.thumbnailUrl+"'><span>"+item.title+"</span><span>"+item.url+"</span><button class='btn btn-outline-success justify-content-end ' type='submit'>Add to Order</button></div></li>" ).appendTo( ul );
        };

        });
</script> -->

<!-- <script type="text/javascript">
  $( function() {
   $.getJSON("https://raw.githubusercontent.com/ShubhamMahato/DemoProject/master/items.json", function(data) {
     autoComplete = [];
     for (var i = 0, len = data.length; i < len; i++) {
       autoComplete.push(data[i].title);
     }
     $( "#auto_search" ).autocomplete({
       source: autoComplete,
       minLength:1
     });
   });
 });
</script> -->
 
<script>
  var source= 
  [
    {
     id:1,
     value:"Ghee",
     img:"https://images-na.ssl-images-amazon.com/images/I/91kSCdljC%2BL._SX569_.jpg",
     price:"600"},
    {
    id:2,
     value:"Atta",
     img:"https://5.imimg.com/data5/MO/VY/MY-26606518/ashirwad-wheat-flour-500x500.jpg",
     price:"50"},
     {
      id:3,
     value:"Daal",
     img:"https://images-na.ssl-images-amazon.com/images/I/91%2B85gJpshL._SL1500_.jpg",
     price:"150"},
    {
      id:4,
     value:"Maggie",
     img:"https://images-na.ssl-images-amazon.com/images/I/81WyWDbuqsL._SX569_.jpg",
     price:"80"}
  
  ];
 
  function myFunction() {
    var results = [];
    var price=0;
    var searchField = "value";
    var searchVal = document.getElementById("auto_search").value;;
    if(searchVal==""||searchVal.length==0){
      alert("Please! Enter value!!");
    }
    else
    {
    for (var i=0 ; i < source.length ; i++)
    {
      if (source[i][searchField] == searchVal) {
          results.push(source[i]);
      }
    }
    $("#productTable tbody").append(
      "<tr>" +
        "<td><img src='"+getFields(results, "img")+"' alt='item image'/></td>" +
        "<td>"+getFields(results, "value")+"</td>" +
        "<td  class='countable'>"+getFields(results, "price")+"</td>" +
        "<td><button onclick='deleteRow()' class='btn btn-danger'>Delete</button></td>" +
      "</tr>"
  );
  var cls = document.getElementById("productTable").getElementsByTagName("td");
    var sum = 0;
    for (var i = 0; i < cls.length; i++){
        if(cls[i].className == "countable"){
            sum += isNaN(cls[i].innerHTML) ? 0 : parseInt(cls[i].innerHTML);
        }
    }
  document.getElementById("pricetag").innerHTML=sum;
    }
  }

  function getFields(source, value) {
    var output = [];
    for (var i=0; i < source.length ; ++i)
        output.push(source[i][value]);
    return output;
}

function deleteRow() {
  var index, table = document.getElementById('productTable');
            for(var i = 1; i < table.rows.length; i++)
            {
                table.rows[i].cells[3].onclick = function()
                {
                    var c = confirm("do you want to delete this row");
                    if(c === true)
                    {
                        index = this.parentElement.rowIndex;
                        table.deleteRow(index);
                    }
                    
                    //console.log(index);
                };
                
            }
}
   
  </script>



<script type="text/javascript">
    function checkout(){
      if(document.getElementById("productTable").rows.length==1){
        alert("Please! add iteam to cart");
      }
    }
</script>

  
  </head>
  <body>
    
    <div class="container-fluid">
      <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <a class="navbar-brand" href="#">
          <img
            src="https://png.pngtree.com/png-vector/20190115/ourlarge/pngtree-supermarket-the-mall-grocery-store-cartoon-png-image_370349.jpg"
            width="30"
            height="30"
            class="d-inline-block align-top"
            alt=""
          />
          Groceries Shop
        </a>
        <button
          class="navbar-toggler"
          type="button"
          data-toggle="collapse"
          data-target="#navbarNav"
          aria-controls="navbarNav"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav">
            <li class="nav-item ">
              <a class="nav-link" href="./groceries.html"
                >Home <span class="sr-only">(current)</span></a
              >
            </li>
            <li class="nav-item active">
              <a class="nav-link" href="./Order_Now.html">Order Now</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#">About us</a>
            </li>
          </ul>
        </div>
      </nav>


        <div class="container">
            <div class="row">
              <div class="col-sm-3 col-md-6 col-lg-4">
              <div class="row justify-content-center">
              <div class="row-sm-4">
                <input  id = "auto_search" class=" form-control justify-content-start"  placeholder="Search" aria-label="Search">
              </div>
              <div class="row-sm-2">
                <button onclick="myFunction()" class=" btn btn-outline-success justify-content-end" type="submit">Search</button>
              </div>
            </div>
            </div>
            <div class="col-sm-9 col-md-6 col-lg-8">
              <table id="productTable" class="table table-bordered">
                <thead>
                  <tr>
                    <th scope="col">Item Image</th>
                    <th scope="col">Item Name</th>
                    <th scope="col">Price</th>
                    <th scope="col">Delete Item</th>
                  </tr>
                </thead>
                <tbody>
                 
                 
                </tbody>
              </table>
             </form>
           </div>
            </div>

            <div class="container">
              <div class="row justify-content-center">
              <h4>Total Price: </h4><h4 id="pricetag"></h4><br>
              
              
              </div>
              <div  class="row justify-content-center">
                <button onclick="checkout()" class="btn btn-primary">Procced to order</button>
              </div>
            </div>
        </div>

        
  </body>
</html>